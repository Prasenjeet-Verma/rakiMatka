<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/css/adminDashbord.css">
    
  </head>
  <body class="flex min-h-screen">
    <aside
      id="sidebar"
      class="sidebar border-r border-gray-200 fixed inset-y-0 left-0 z-50 lg:relative lg:translate-x-0 transform -translate-x-full lg:block "
    >
      <div class="p-4">
        <div class="relative mb-4">
          <input
            type="text"
            placeholder="Search"
            class="w-full bg-white border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"
          />
          <button
            class="absolute right-0 top-0 bottom-0 px-3 bg-neutral-800 text-white rounded-r"
          >
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>

       <!-- ============================= Nav is here ============================ -->

      <nav class="text-gray-600 text-sm">
        <a
          href="/admin/dashboard"
           class="nav-item flex items-center px-4 py-3 border-b border-gray-100"
        >
          <i class="fas fa-tachometer-alt w-6"></i> Dashboard
        </a>


        <a
          href="/admin/allUsers"
          class="nav-item flex items-center px-4 py-3 bg-gray-100 border-l-4 border-blue-500 font-semibold"
        >
          <i class="fas fa-users w-6"></i> All Users
        </a>



<div class="border-b border-gray-100">
  <details class="group">

    <summary class="list-none cursor-pointer w-full nav-item flex items-center justify-between px-4 py-3">
      <span class="flex items-center gap-2">
        <i class="fas fa-database w-6"></i> System Reports
      </span>
      <i class="fas fa-chevron-left text-xs transition-transform duration-200 group-open:-rotate-90"></i>
    </summary>

    <!-- Sub Menu -->
    <div class="pl-10 py-2 space-y-2 text-sm text-gray-700">
      <a href="adminMarketWinBid.html" class="block hover:text-[#eeba30]">Market Win/Bid</a>
      <a href="adminDepositTransactions.html" class="block hover:text-[#eeba30]">Deposit Transactions</a>
      <a href="adminWithdrawTransactions.html" class="block hover:text-[#eeba30]">Withdraw Transactions</a>
    </div>
  </details>
</div>





<div class="border-b border-gray-100">
  <details class="group">
    
    <summary class="list-none cursor-pointer w-full nav-item flex items-center justify-between px-4 py-3">
      <span class="flex items-center gap-2">
        <i class="fas fa-gamepad w-6"></i> Game Management
      </span>
      <i class="fas fa-chevron-left text-xs transition-transform duration-200 group-open:-rotate-90"></i>
    </summary>

    <!-- Sub Menu -->
    <div class="pl-10 py-2 space-y-2 text-sm text-gray-700">
      <a href="adminGameProviders.html" class="block hover:text-[#eeba30]">Game Providers</a>
      <a href="adminGameRates.html" class="block hover:text-[#eeba30]">Game Rates</a>
      <a href="adminGameResult.html" class="block hover:text-[#eeba30]">Game Result</a>
      <a href="adminGenerateResult.html" class="block hover:text-[#eeba30]">Generate Result</a>
      <a href="adminBidRevert.html" class="block hover:text-[#eeba30]">Bid Revert</a>
    </div>

  </details>
</div>




<div class="border-b border-gray-100">
  <details class="group">
    
    <summary
      class="list-none cursor-pointer w-full nav-item flex items-center justify-between px-4 py-3">
      <span class="flex items-center gap-2">
        <i class="fas fa-book w-6"></i> Bookie Corner
      </span>
      <i class="fas fa-chevron-left text-xs transition-transform duration-200 group-open:-rotate-90"></i>
    </summary>

    <!-- Sub Menu -->
    <div class="pl-10 py-2 space-y-2 text-sm text-gray-700">
      <a href="adminOCCuttingGroup.html" class="block hover:text-[#eeba30]">OC Cutting Group</a>
      <a href="adminLossCutting.html" class="block hover:text-[#eeba30]">Loss Cutting</a>
    </div>

  </details>
</div>



<div class="border-b border-gray-100">
  <details class="group">
    <summary
      class="list-none cursor-pointer w-full nav-item flex items-center justify-between px-4 py-3">
      <span class="flex items-center gap-2">
        <i class="fas fa-file-alt w-6"></i> Report Management
      </span>
      <i class="fas fa-chevron-left text-xs transition-transform duration-200 group-open:-rotate-90"></i>
    </summary>

    <!-- Sub Menu -->
    <div class="pl-10 py-2 space-y-2 text-sm text-gray-700">
      <a href="adminWinnerPrediction.html" class="block hover:text-[#eeba30]">Winner Prediction</a>
      <a href="adminBidHistory.html" class="block hover:text-[#eeba30]">Bid History</a>
      <a href="adminWinningHistory.html" class="block hover:text-[#eeba30]">Winning History</a>
      <a href="adminCustomerSellReport.html" class="block hover:text-[#eeba30]">Customer Sell Report</a>
    </div>

  </details>
</div>




<div class="border-b border-gray-100">
  <details class="group">

    <summary class="list-none cursor-pointer w-full nav-item flex items-center justify-between px-4 py-3">
      <span class="flex items-center gap-2">
        <i class="fas fa-wallet w-6"></i> Wallet Management
      </span>
      <i class="fas fa-chevron-left text-xs transition-transform duration-200 group-open:-rotate-90"></i>
    </summary>

    <!-- Sub Menu -->
    <div class="pl-10 py-2 space-y-2 text-sm text-gray-700">
      <a href="adminEditWallet.html" class="block hover:text-[#eeba30]">Edit Wallet</a>
      <a href="adminFundReport.html" class="block hover:text-[#eeba30]">Fund Report</a>
      <a href="adminDepositRequests.html" class="block hover:text-[#eeba30]">Deposit Requests</a>
      <a href="adminWithdrawPointsRequestReport.html" class="block hover:text-[#eeba30]">Withdraw Points Request Report</a>
    </div>

  </details>
</div>



<div class="border-b border-gray-100">
  <details class="group">

    <summary class="list-none cursor-pointer w-full nav-item flex items-center justify-between px-4 py-3">
      <span class="flex items-center gap-2">
        <i class="fas fa-cog w-6"></i> Settings
      </span>
      <i class="fas fa-chevron-left text-xs transition-transform duration-200 group-open:-rotate-90"></i>
    </summary>

    <!-- Sub Menu -->
    <div class="pl-10 py-2 space-y-2 text-sm text-gray-700">
      <a href="adminChangePassword.html" class="block hover:text-[#eeba30]">Change Password</a>
      <a href="adminManualDepositMethods.html" class="block hover:text-[#eeba30]">Manual Deposit Methods</a>
      <a href="adminWithdrawTimings.html" class="block hover:text-[#eeba30]">Withdraw Timings</a>
      <a href="adminContactUsDetails.html" class="block hover:text-[#eeba30]">Contact Us Details</a>
      <a href="adminMainSettings.html" class="block hover:text-[#eeba30]">Main Settings</a>
      <a href="adminPaymentGatewaySettings.html" class="block hover:text-[#eeba30]">Payment Gateway Settings</a>
      <a href="adminImageSlider.html" class="block hover:text-[#eeba30]">Image Slider</a>
      <a href="adminImageSliderWebsite.html" class="block hover:text-[#eeba30]">Image Slider Website</a>
      <a href="adminHomepopupmsg.html" class="block hover:text-[#eeba30]"> Home popup msg</a>
    </div>

  </details>
</div>




<div class="border-b border-gray-100">
  <details class="group">

    <summary class="list-none cursor-pointer w-full nav-item flex items-center justify-between px-4 py-3">
      <span class="flex items-center gap-2">
        <i class="fa-solid fa-bell w-6"></i> Notice Management
      </span>
      <i class="fas fa-chevron-left text-xs transition-transform duration-200 group-open:-rotate-90"></i>
    </summary>

    <!-- Sub Menu -->
    <div class="pl-10 py-2 space-y-2 text-sm text-gray-700">
      <a href="adminBellNotifications.html" class="block hover:text-[#eeba30]">Bell Notifications</a>
      <a href="adminSendNotification.html" class="block hover:text-[#eeba30]">Send Notification</a>
      <a href="adminManageContents.html" class="block hover:text-[#eeba30]">Manage Contents</a>
    </div>

  </details>
</div>




        <div class="px-4 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider"> Personal Games </div>


<div class="border-b border-gray-100">
  <details class="group">

    <summary class="list-none cursor-pointer w-full nav-item flex items-center justify-between px-4 py-3">
      <span class="flex items-center gap-2">
        <i class="fas fa-th w-6"></i> Main Starline
      </span>
      <i class="fas fa-chevron-left text-xs transition-transform duration-200 group-open:-rotate-90"></i>
    </summary>

    <!-- Sub Menu -->
    <div class="pl-10 py-2 space-y-2 text-sm text-gray-700">
      <a href="adminGameProvider.html" class="block hover:text-[#eeba30]">Game Provider</a>
      <a href="adminGameRates.html" class="block hover:text-[#eeba30]">Game Rates</a>
      <a href="adminBidHistory.html" class="block hover:text-[#eeba30]">Bid History</a>
      <a href="adminGameResult.html" class="block hover:text-[#eeba30]">Game Result</a>
      <a href="adminResultHistory.html" class="block hover:text-[#eeba30]">Result History</a>
      <a href="adminSellReport.html" class="block hover:text-[#eeba30]">Sell Report </a>
      <a href="adminWinningReport.html" class="block hover:text-[#eeba30]">Winning Report </a>
    </div>

  </details>
</div>



<div class="border-b border-gray-100">
  <details class="group">

    <summary class="list-none cursor-pointer w-full nav-item flex items-center justify-between px-4 py-3">
      <span class="flex items-center gap-2">
        <i class="fas fa-th w-6"></i> Main Jackpot
      </span>
      <i class="fas fa-chevron-left text-xs transition-transform duration-200 group-open:-rotate-90"></i>
    </summary>

    <!-- Sub Menu -->
    <div class="pl-10 py-2 space-y-2 text-sm text-gray-700">
      <a href="adminGameProvider.html" class="block hover:text-[#eeba30]">Game Provider</a>
      <a href="adminGameRates.html" class="block hover:text-[#eeba30]">Game Rates</a>
      <a href="adminBidHistory.html" class="block hover:text-[#eeba30]">Bid History</a>
      <a href="adminGameResult.html" class="block hover:text-[#eeba30]">Game Result</a>
      <a href="adminResultHistory.html" class="block hover:text-[#eeba30]">Result History</a>
      <a href="adminSellReport.html" class="block hover:text-[#eeba30]">Sell Report </a>
    </div>

  </details>
</div>



      </nav>
    </aside>

    <main class="flex-1 flex flex-col min-w-0 overflow-hidden">

      <!-- ============================= Header is here ============================ -->
      <header
      style="z-index: 50000; position: fixed; width: 100%;"
        class="bg-white h-14 flex items-center justify-between px-4 border-b border-gray-200"
      >
        <button id="menuBtn" class="text-gray-600 focus:outline-none">
          <i class="fas fa-bars text-xl"></i>
        </button>
        <button  class="text-gray-600">
          <i class="fas fa-power-off text-xl"></i>
        </button>
      </header>


      
      <header
        class="bg-white h-14 flex items-center justify-between px-4 border-b border-gray-200"
      >
      </header>    <!-- header overflow done -->

<!-- =========================================== Body Start here ========================================== -->
<main class="bg-gray-100 p-4">

<!-- CARD -->
<div class="bg-white rounded-lg shadow p-4">

  <!-- HEADER -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4">
    <h2 class="text-lg font-semibold">Users</h2>
    <!-- <button class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">
      Create User
    </button> -->

    <button id="openModal"
  class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">
  Create User
</button>

  </div>

  <!-- CONTROLS -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4">

    <div class="flex items-center gap-2 text-sm">
      <span>Show</span>
      <select class="border rounded px-2 py-1">
        <option>10</option>
        <option>50</option>
        <option>100</option>
        <option>All</option>
      </select>
    </div>

    <div class="flex items-center gap-2 text-sm">
      <label>Search:</label>
     <input type="text" id="userSearch"
       class="border rounded px-2 py-1"
       placeholder="Search username">
    </div>

  </div>

  <!-- TABLE WRAPPER -->
  <div class="overflow-x-auto">
    <table class="min-w-full border text-sm">

      <!-- HEAD -->
      <thead class="bg-gray-100 text-left">
        <tr>
          <th class="border px-3 py-2">ID</th>
          <th class="border px-3 py-2">Mobile</th>
          <th class="border px-3 py-2">Name</th>
          <th class="border px-3 py-2">MPin</th>
          <th class="border px-3 py-2">Wallet</th>
          <th class="border px-3 py-2">Registered on</th>
          <th class="border px-3 py-2">Active</th>
          <th class="border px-3 py-2">Action</th>
        </tr>
      </thead>

      <!-- BODY -->
  <tbody id="userTable">
  <% users.forEach((user, index) => { %>
    <tr class="hover:bg-gray-50">
      <td class="border px-3 py-2"><%= index + 1 %></td>

      <td class="border px-3 py-2"><%= user.phoneNo %></td>

      <td class="border px-3 py-2 username"><%= user.username %></td>

      <td class="border px-3 py-2">****</td>

      <td class="border px-3 py-2 flex items-center gap-2">
        ₹ <%= user.wallet %>
        <button 
          class="openWalletModal bg-gray-600 text-white px-2 py-1 rounded text-xs"
          data-userid="<%= user._id %>"
          data-balance="<%= user.wallet %>"
        >✎</button>
      </td>

      <td class="border px-3 py-2">
        <%= new Date(user.createdAt).toLocaleString() %>
      </td>

      <td class="border px-3 py-2">
        <% if(user.userStatus === "active") { %>
          <span class="bg-green-600 text-white px-3 py-1 rounded text-xs">
            Active
          </span>
        <% } else { %>
          <span class="bg-red-600 text-white px-3 py-1 rounded text-xs">
            Blocked
          </span>
        <% } %>
      </td>

      <td class="border px-3 py-2 flex gap-2">
        <button 
          onclick="toggleUser('<%= user._id %>')" 
          class="bg-red-600 text-white px-3 py-1 rounded text-xs">
          <%= user.userStatus === "active" ? "Block" : "Unblock" %>
        </button>

        <a href="/admin/user/<%= user._id %>">
          <button class="bg-yellow-500 text-white px-3 py-1 rounded text-xs">
            View
          </button>
        </a>
      </td>
    </tr>
  <% }) %>
</tbody>

    </table>
  </div>

  <!-- FOOTER -->
  <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mt-4 text-sm">

    <div>
      Showing 1 to 10 of 2,508 entries
    </div>

    <div class="flex gap-2 items-center">
      <button class="border px-2 py-1 rounded">Previous</button>
      <button class="bg-blue-600 text-white px-3 py-1 rounded">1</button>
      <button class="border px-3 py-1 rounded">2</button>
      <button class="border px-3 py-1 rounded">3</button>
      <span>...</span>
      <button class="border px-3 py-1 rounded">251</button>
      <button class="border px-2 py-1 rounded">Next</button>
    </div>

  </div>

</div>

</main>


<!-- =========================================== Create User Modal here ========================================== -->
<input type="hidden" id="openModalOnLoad" value="<%= errors && errors.length > 0 ? 'true' : 'false' %>">

<!-- MODAL BACKDROP -->
<div id="userModal"
  class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">

  <!-- MODAL BOX -->
  <div class="bg-white rounded-lg w-full max-w-md p-5 relative">

    <!-- MODAL HEADER -->
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-lg font-semibold">Create User</h3>
      <button id="closeModal" class="text-gray-500 hover:text-black text-xl">
        &times;
      </button>
    </div>

    <!-- FORM -->
     <% if (errors && errors.length > 0) { %>
  <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded mb-3">
    <% errors.forEach(err => { %>
      <p>• <%= err %></p>
    <% }) %>
  </div>
<% } %>

    <form action="/admin/createuser" method="POST" class="space-y-3">

      <div>
        <label class="text-sm font-medium">Name</label>
        <input type="text" name="username" value="<%= oldInput?.username || '' %>"
          class="w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="text-sm font-medium">Mobile</label>
        <input type="text" name="phoneNo" value="<%= oldInput?.phoneNo || '' %>"
          class="w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="text-sm font-medium">Password</label>
        <input type="password" name="password"
          class="w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="text-sm font-medium">Wallet Amount</label>
        <input type="number" name="wallet" value="<%= oldInput?.wallet || '' %>"
          class="w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <!-- ACTIONS -->
      <div class="flex justify-end gap-2 pt-3">
        <button type="button" id="cancelModal"
          class="border px-4 py-2 rounded hover:bg-gray-100">
          Cancel
        </button>
        <button type="submit"
          class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
          Create
        </button>
      </div>

    </form>
  </div>
</div>


<!-- =========================================== Debit / Credit Modal here ========================================== -->

<!-- MODAL BACKDROP -->
<div id="walletModal"
  class="fixed inset-0 bg-black/50 hidden flex items-center justify-center z-50">

  <!-- MODAL -->
  <div class="bg-white w-full max-w-lg rounded-lg shadow-lg">

    <!-- HEADER -->
    <div class="flex justify-between items-center px-5 py-4 border-b">
      <h2 class="text-xl font-semibold">Add / Withdraw Points</h2>
      <button id="closeWalletModal" class="text-2xl text-gray-500 hover:text-black">
        &times;
      </button>
    </div>

    <!-- BODY -->
    <div class="p-5 space-y-4">

      <div>
        <label class="block text-sm font-medium mb-1">Amount</label>
        <input type="number" placeholder="Enter Points Here"
          class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">Debit / Credit</label>
        <select
          class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="credit">Credit</option>
          <option value="debit">Debit</option>
        </select>
      </div>

    </div>

    <!-- FOOTER -->
    <div class="flex justify-end gap-3 px-5 py-4 border-t">
      <button id="submitWallet"
        class="bg-green-600 text-white px-5 py-2 rounded hover:bg-green-700">
        Submit
      </button>
      <button id="cancelWalletModal"
        class="bg-red-600 text-white px-5 py-2 rounded hover:bg-red-700">
        Close
      </button>
    </div>

  </div>
</div>

      </div>
    </main>

    <script src="/js/adminAdUser.js"></script>
    <script src="/js/dabitCradit.js"></script>
    <script src="/js/sidebar.js"></script>
    <script src="/js/calander.js"></script>
    <!-- Block Confirm Modal -->
<div id="blockConfirmModal"
  class="fixed inset-0 bg-black/50 hidden flex items-center justify-center z-50">

  <div class="bg-white rounded-lg w-full max-w-sm p-5">

    <h2 class="text-lg font-semibold mb-3">Confirm Action</h2>
    <p class="text-gray-600 mb-4">Are you sure you want to change this user's status?</p>

    <div class="flex justify-end gap-3">
      <button id="cancelBlock"
        class="px-4 py-2 border rounded hover:bg-gray-100">
        Cancel
      </button>

      <button id="confirmBlock"
        class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
        Yes, Continue
      </button>
    </div>

  </div>
</div>

  </body>
</html>
