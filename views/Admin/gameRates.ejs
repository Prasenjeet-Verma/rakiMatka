<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
 <body class="flex min-h-screen">
      <!-- HEADER -->
   
       <!-- ============================= Nav is here ============================ -->
      <aside
      id="sidebar"
      class="sidebar border-r border-gray-200 fixed inset-y-0 left-0 z-50 lg:relative lg:translate-x-0 transform -translate-x-full lg:block"
    >
      <div class="p-4">
        <div class="relative mb-4">
          <input
            type="text"
            placeholder="Search"
            class="w-full bg-white border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"
          />
          <button
            class="absolute right-0 top-0 bottom-0 px-3 bg-neutral-800 text-white rounded-r"
          >
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>

      <!-- ============================= Nav is here ============================ -->
       <%- include('../partials/adminNav') %>
      
    </aside>
<main class="flex-1 flex flex-col min-w-0 overflow-hidden">
<%- include('../partials/adminHeader') %>
      <div class="px-4 sm:px-6 lg:ml-64 mt-6 sm:mt-8">

  <div class="max-w-2xl bg-white p-4 sm:p-6 rounded-xl shadow">

    <h1 class="text-xl sm:text-2xl font-bold mb-5">
      Game Rates Management
    </h1>

    <form action="/admin/GameRates" method="POST" class="space-y-4">

      <!-- Game Type -->
      <div>
        <label for="gameType" class="block text-sm font-medium text-gray-700">
          Game Type
        </label>
        <input
          type="text"
          id="gameType"
          name="gameType"
          required
          class="mt-1 w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Bet Amount -->
      <div>
        <label for="betAmount" class="block text-sm font-medium text-gray-700">
          Bet Amount
        </label>
        <input
          type="number"
          id="betAmount"
          name="betAmount"
          required
          class="mt-1 w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Profit Amount -->
      <div>
        <label for="profitAmount" class="block text-sm font-medium text-gray-700">
          Profit Amount
        </label>
        <input
          type="number"
          step="0.01"
          id="profitAmount"
          name="profitAmount"
          required
          class="mt-1 w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Submit Button -->
      <div class="pt-2">
        <button
          type="submit"
          class="w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-md font-medium"
        >
          Add / Update Rate
        </button>
      </div>

    </form>

  </div>

</div>

 <!-- CONTENT -->
<div class="p-4 space-y-4">

  <% gameRates.forEach(rate => { %>
    <div
      class="flex justify-between items-center px-5 py-4 rounded-xl shadow-md
      <%= rate.isActive ? 'bg-emerald-800 text-white' : 'bg-gray-400 text-gray-800' %>"
    >
      <!-- LEFT -->
      <div class="flex flex-col">
        <span class="font-semibold"><%= rate.gameType %></span>
        <span class="text-sm">
          ₹<%= rate.betAmount %> → ₹<%= rate.profitAmount %>
        </span>
      </div>

      <!-- RIGHT ACTIONS -->
      <div class="flex gap-2">

        <!-- TOGGLE ACTIVE -->
        <form action="/admin/game-rates/toggle/<%= rate._id %>" method="POST">
          <button
            class="px-3 py-1 rounded text-sm
            <%= rate.isActive ? 'bg-yellow-500' : 'bg-green-600' %>"
          >
            <%= rate.isActive ? 'Disable' : 'Enable' %>
          </button>
        </form>

        <!-- DELETE -->
        <form
          action="/admin/game-rates/delete/<%= rate._id %>"
          method="POST"
          onsubmit="return confirm('Are you sure you want to delete this rate?')"
        >
          <button class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">
            Delete
          </button>
        </form>

      </div>
    </div>
  <% }) %>

</div>
</main>
<script src="/js/sidebar.js"></script>
</body>
</html>