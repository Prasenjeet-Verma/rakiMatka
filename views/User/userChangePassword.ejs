<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Change Password</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
</head>

<body class="bg-gray-100 min-h-screen">
  <header class="bg-teal-800 text-white px-4 py-5 rounded-b-3xl">
    <div class="flex items-center gap-3">
      <a href="/userdashboard"><i class="fa-solid fa-arrow-left text-xl cursor-pointer"></i></a>
      <h1 class="text-lg font-semibold">Change Password</h1>
    </div>
  </header>
  <% if (flash) { %>
    <div id="flashMessage" style="width: 100%;" class="fixed top-5 left-1/2 -translate-x-1/2 px-6 py-3 rounded-lg text-white text-sm shadow-lg
    <%= flash.type === 'success' ? 'bg-green-600' : 'bg-red-600' %>">
      <%= flash.message %>
    </div>

    <script>
      setTimeout(() => {
        const el = document.getElementById("flashMessage");
        if (el) el.style.display = "none";
      }, 1000); // ‚è± 1 second
    </script>
    <% } %>
      <div class="p-4 space-y-6">
        <form action="/forgetuserpassword" method="post">
          <div class="bg-white p-4 rounded-xl shadow-md">
            <label class="block text-gray-700 font-semibold mb-2">Old Password</label>
            <div class="relative">
              <input type="password" placeholder="Old Password" name="oldPassword"
                class="password-field w-full bg-gray-100 rounded-lg px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-emerald-600" />
              <i
                class="toggle-password fa-solid fa-eye absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 cursor-pointer p-1"></i>
            </div>
          </div>

          <div class="bg-white p-4 rounded-xl shadow-md">
            <label class="block text-gray-700 font-semibold mb-2">New Password</label>
            <div class="relative">
              <input type="password" placeholder="New Password" name="newPassword"
                class="password-field w-full bg-gray-100 rounded-lg px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-emerald-600" />
              <i
                class="toggle-password fa-solid fa-eye absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 cursor-pointer p-1"></i>
            </div>
          </div>

          <div class="bg-white p-4 rounded-xl shadow-md">
            <label class="block text-gray-700 font-semibold mb-2">Confirm Password</label>
            <div class="relative">
              <input type="password" placeholder="Confirm Password" name="confirmPassword"
                class="password-field w-full bg-gray-100 rounded-lg px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-emerald-600" />
              <i
                class="toggle-password fa-solid fa-eye absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 cursor-pointer p-1"></i>
            </div>
          </div>

          <button type="submit"
            class="w-full mt-6 bg-emerald-800 text-white py-4 rounded-full text-lg font-semibold shadow-lg hover:bg-emerald-900 transition active:scale-95">
            Submit
          </button>
        </form>
      </div>

      <script>
        document.querySelectorAll('.toggle-password').forEach(icon => {
          icon.addEventListener('click', function () {
            // Find the input field relative to the clicked icon
            const input = this.previousElementSibling;

            if (input.type === "password") {
              input.type = "text";
              this.classList.replace('fa-eye', 'fa-eye-slash');
              this.classList.add('text-emerald-600'); // Optional: change color when visible
            } else {
              input.type = "password";
              this.classList.replace('fa-eye-slash', 'fa-eye');
              this.classList.remove('text-emerald-600');
            }
          });
        });
      </script>
</body>

</html>